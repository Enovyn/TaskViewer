 <!DOCTYPE html>
 <html>

   <head>
    <title>Trello API</title>

 <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
 <script src="https://api.trello.com/1/client.js?key=337f74f542955e35b985e52805c28641"></script>

<style>	
	p {
    position: absolute;
    left: 200px;
    top: 500px;
}

	#checkliste {
    position: absolute;
    left: 650px;
	top: 60px;
}

	#sonstiges {
    position: absolute;
    left: 650px;
	top: 0px;
}


@font-face {
   font-family: GoodTime;
   src: url(GOODTIME.ttf);
}



</style>
	
	
	
	</head>



<body bgcolor="black", text = "white">
	  
<button type = "button" onclick="get19Board()">Get 19 Board Cards</button>

<button type = "button" onclick="undLos()">Starten</button>

<div style="width:600px">

<h1 id="liste" style="font-size:170%;font-family:GoodTime">Start</h1>

<ul id="demo0"  style="font-size:170%"></ul>

<ul id="demo1"  style="font-size:170%"></ul>

<ul id="demo2"  style="font-size:170%"></ul>

<ul id="demo3"  style="font-size:170%"></ul>

<ul id="demo4"  style="font-size:170%"></ul>

<ul id="demo5"  style="font-size:170%"></ul>

<ul id="demo6"  style="font-size:170%"></ul>

<ul id="demo7"  style="font-size:170%"></ul>

<ul id="demo8"  style="font-size:170%"></ul>

<ul id="demo9"  style="font-size:170%"></ul>

<ul id="demo10"  style="font-size:170%"></ul>

<ul id="demo11"  style="font-size:170%"></ul>

</div>

<h1 id="sonstiges" style="font-size:170%;font-family:GoodTime">Sonstige Aufgaben</h1>

<ul id="checkliste"  style="font-size:170%"></ul>

<p id="design_freeze"  style="font-size:300%;color:rgb(165, 009, 020);font-family:GoodTime"></p>

<script>

var lists_id = [];
var lists_name = [];

var cards_id = [];


var list0 = [];
var list1 = [];
var list2 = [];
var list3 = [];
var list4 = [];
var list5 = [];
var list6 = [];
var list7 = [];
var list8 = [];
var list9 = [];
var list10 = [];
var list11 = [];

var output = [];
var check = [];
var content = [];

var i, j, c = 0;

var freeze_date = new Date(2018, 11, 2, 23, 59, 59, 59, 59);

//COUNTDOWN
// Set the date we're counting down to
var countDownDate = freeze_date.getTime();

// Update the count down every 1 minutes
function countdown(){setInterval(function() {
//var countdown = function(){

  // Get todays date and time
  var now = new Date().getTime();

  // Find the distance between now and the count down date
  var distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var t;
  if(days == 1){t=' Tag '}
  else{t =' Tage '};
 
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var h;
  if(hours == 1){h=' Stunde '}
  else{h =' Stunden '};
  
  var minutes = Math.ceil((distance % (1000 * 60 * 60)) / (1000 * 60));
  
  var m;
  if(minutes == 1){m =' Minute '}
  else{m =' Minuten '};

  // Display the result in the element with id="design_freeze"
  document.getElementById("design_freeze").innerHTML = days + t + hours + h + minutes + m + "<br>BIS DESIGN FREEZE";

  // If the count down is finished, write some text 
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("design_freeze").innerHTML = "ENDE";
  }
},1000);};


var authenticationSuccess = function() {
	  console.log('Successful authentication'); 
	};
var authenticationFailure = function() {
	  alert('Failed authentication');
	};


	window.Trello.authorize({
      type: 'redirect',
      name: 'Getting Started Application',
      scope: {
      read: true,
      write: true },
      expiration: 'never',
      success: authenticationSuccess,
      error: authenticationFailure
    });
	
	
var undLos = function(){
	Trello.get("boards/5b9624316fe620864ed57162/lists/open", getSuccessLists, getFailLists);
	var d = new Date();
	//document.getElementById("design_freeze").innerHTML=(days_between(freeze_date, d) + " Tage bis zum Design Freeze");
	countdown();
	getSonstiges();
};
	
var getSuccess = function (data) {
	console.log('Operation successful: get Lists');
	console.log(JSON.stringify(data, null, 2));
}  

var getSuccessLists = function (data) {
	console.log('Operation successful: get Lists');
  
  $("button").remove();
for(i = 0; i < data.length; i++){
	lists_id[i] = data[i].id;
	lists_name = lists_name.concat(data[i].name);
}
	window.Trello.get("search?query=label:pink&idBoards=5b9624316fe620864ed57162&modelTypes=cards&card_fields=name,idList,closed,idChecklists&cards_limit=100", getSuccessCards, getFailCards);
} 
 
 
var getSuccessCards = function (data) {
	console.log('Operation successful: get Cards');
	Taskviewer(data);
}

var test = [];

function Taskviewer(data){
for(j = 0; j <lists_id.length; j++){
	for(i = 0; i < data.cards.length; i++){
		if(data.cards[i].closed==false){
			if(lists_id[j]==data.cards[i].idList){
				//if(data.cards[i].name == 'General'){test=test.concat(j); 
				//Trello.get("cards/" + data.cards[i].id + "/checklists", getSuccessChecklists, getFailChecklists);
				//}
				content = content.concat("<li>" + data.cards[i].name + "</li>");
				if(j == 0){
				list0 = list0.concat(content);
				}
				if(j == 1){
				list1 = list1.concat(content);
				}
				if(j == 2){
				list2 = list2.concat(content);
				}
				if(j == 3){
				list3 = list3.concat(content);
				}
				if(j == 4){
				list4 = list4.concat(content);
				}
				if(j == 5){
				list5 = list5.concat(content);
				}
				if(j == 6){
				list6 = list6.concat(content);
				}
				if(j == 7){
				list7 = list7.concat(content);
				}
				if(j == 8){
				list8 = list8.concat(content);
				}
				if(j == 9){
				list9 = list9.concat(content);
				}
				if(j == 10){
				list10 = list10.concat(content);
				}
				if(j == 11){
				list11 = list11.concat(content);
				}
				content = [];
				
			}
		}
	}
}

Ausgabe();
}


var Ausgabe = function(){
for(i = 0; i < 12; i++){
document.getElementById("demo"+i).style.display = "none";
}
document.getElementById("demo0").innerHTML=list0.join("");
document.getElementById("demo1").innerHTML=list1.join("");
document.getElementById("demo2").innerHTML=list2.join("");
document.getElementById("demo3").innerHTML=list3.join("");
document.getElementById("demo4").innerHTML=list4.join("");
document.getElementById("demo5").innerHTML=list5.join("");
document.getElementById("demo6").innerHTML=list6.join("");
document.getElementById("demo7").innerHTML=list7.join("");
document.getElementById("demo8").innerHTML=list8.join("");
document.getElementById("demo9").innerHTML=list9.join("");
document.getElementById("demo10").innerHTML=list10.join("");
document.getElementById("demo11").innerHTML=list11.join("");
i = 0;
startDisplay();
}

var startDisplay = function() {
    document.getElementById("demo"+i).style.display = "block";
	document.getElementById("liste").innerHTML=lists_name[i];
	window.setTimeout(stopDisplay, 1000);
} 

var stopDisplay = function() {
    document.getElementById("demo"+i).style.display = "none";
	if(i < 11){
	i++;
	startDisplay();
	}
	else if(i >= 11){
	reset();
	undLos();
	}
}


var reset = function(){
list0 = [];
list1 = [];
list2 = [];
list3 = [];
list4 = [];
list5 = [];
list6 = [];
list7 = [];
list8 = [];
list9 = [];
list10 = [];
list11 = [];

lists_id = [];
lists_name = [];
check = [];
}

var getSuccessSonstiges = function (data) {
	console.log('Operation successful: get Checklist');
	
	for(i = 0; i < data.length; i++){
		if(data[i].state=='incomplete'){
				check = check.concat("<li>" + data[i].name + "</li>");
			}
		}
		document.getElementById("checkliste").innerHTML=check.join("");
	}

var getSuccessChecklists = function (data) {
	console.log('Operation successful: get Checklist');
	
	for(c = 0; c < data[0].checkItems.length; c++){
		if(data[0].checkItems[c].state=='incomplete'){
				content = content.concat("<li>" + data[0].checkItems[c].name + "</li>");
				//console.log(JSON.stringify(data[0].checkItems[c].name, null, 2));
				console.log(test);
				console.log(data[0].checkItems.length);
		}
		}
	}

var getFailLists = function (){
alert('Listen konnten nicht geholt werden. Fragt nicht Yvonne warum es nicht geht, die weiss es auch nicht.');
};

var getFailCards = function (){
alert('Karten konnten nicht geholt werden. Fragt nicht Yvonne warum es nicht geht, die weiss es auch nicht.');
};

var getFailChecklists = function (){
alert('Checklisten konnten nicht geholt werden. Fragt nicht Yvonne warum es nicht geht, die weiss es auch nicht.');
};



function getSonstiges(){
	window.Trello.get("checklists/5ba10b75be21e366252565b3/checkItems/", getSuccessSonstiges, getFailCards);
};

function getBoards(){
	window.Trello.get("members/me/boards", creationSuccess, creationFail);
};
 
function get19Board(){
	window.Trello.get("boards/5b9624316fe620864ed57162/cards", getSuccess, getFailCards);
	//{window.Trello.get("cards/5ba3a0abd1c1cb792a82fece/checklists", getSuccess, getFailChecklists)}
};

	  </script>
	  
	 </body>
  
  </html>
